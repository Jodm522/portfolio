{"ast":null,"code":"var _jsxFileName = \"/home/james/projects/portfilio1/frontend/src/components/Smashboys/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\nimport \"./smashboys.css\";\nimport BackgroundImage from \"./Images/arena1.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SmashBoys() {\n  _s();\n\n  const canvas = useRef(null);\n  useEffect(() => {\n    //Setup canvas background\n    const ctx = canvas.current.getContext(\"2d\");\n    const gravity = 0.2; // Sprite constructor\n\n    class Sprite {\n      constructor(_ref) {\n        let {\n          position,\n          velocity,\n          color,\n          facing\n        } = _ref;\n        this.position = position;\n        this.velocity = velocity;\n        this.height = 150;\n        this.width = 50;\n        this.lastkey = null;\n        this.color = color;\n        this.isAttacking = false;\n        this.facing = facing;\n        this.attackBox = {\n          position: {\n            x: this.position.x,\n            y: this.position.y\n          },\n          offset: facing === \"right\" ? {\n            x: 0,\n            y: 0\n          } : {\n            x: -50,\n            y: 0\n          },\n          width: 100,\n          height: 50\n        };\n      }\n\n      draw() {\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.position.x, this.position.y, this.width, this.height); //AttackBox\n\n        if (this.isAttacking) {\n          ctx.fillStyle = \"yellow\";\n          ctx.fillRect(this.attackBox.position.x, this.attackBox.position.y, this.attackBox.width, this.attackBox.height);\n        }\n      }\n\n      update() {\n        this.draw();\n        this.attackBox.position.x = this.position.x + (this.facing === \"right\" ? 0 : -50);\n        this.attackBox.position.y = this.position.y;\n        this.position.x += this.velocity.x;\n        this.position.y += this.velocity.y;\n\n        if (this.position.y + this.height + this.velocity.y >= 576) {\n          this.velocity.y = 0;\n        } else this.velocity.y += gravity;\n\n        if (this.position.x + this.width + this.velocity.x <= 0) {\n          this.velocity.x = 0;\n        }\n      }\n\n      attack() {\n        this.isAttacking = true;\n        setTimeout(() => {\n          this.isAttacking = false;\n        }, 100);\n      }\n\n    } //RENDER OTHER SPRITES\n\n\n    class BGSprite {\n      constructor(_ref2) {\n        let {\n          position,\n          imageSrc\n        } = _ref2;\n        this.position = position;\n        this.height = 1040;\n        this.width = 576;\n        this.img = new Image();\n        this.img.src = imageSrc;\n      }\n\n      draw() {\n        // ctx.drawImage(this.image, this.position.x, this.position.y);\n        var canvas = ctx.canvas;\n        var hRatio = canvas.width / img.width;\n        var vRatio = canvas.height / img.height;\n        var ratio = Math.min(hRatio, vRatio);\n        var centerShift_x = (canvas.width - img.width * ratio) / 2;\n        var centerShift_y = (canvas.height - img.height * ratio) / 2;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0, img.width, img.height, centerShift_x, centerShift_y, img.width * ratio, img.height * ratio);\n      }\n\n      update() {\n        this.draw();\n      }\n\n    }\n\n    const background = new BGSprite({\n      position: {\n        x: 0,\n        y: 0\n      },\n      imageSrc: BackgroundImage\n    }); ///REnder Players\n\n    const player1 = new Sprite({\n      position: {\n        x: 0,\n        y: 0\n      },\n      velocity: {\n        x: 0,\n        y: 0\n      },\n      color: \"blue\",\n      //   offset: { x: 0, y: 0 },\n      facing: \"right\"\n    });\n    const player2 = new Sprite({\n      position: {\n        x: 400,\n        y: 100\n      },\n      velocity: {\n        x: 0,\n        y: 0\n      },\n      color: \"red\",\n      //   offset: { x: -50, y: 0 },\n      facing: \"left\"\n    });\n\n    const renderCanvas = () => {\n      ctx.fillStyle = \"black\";\n      ctx.fillRect(0, 0, 1024, 576);\n    };\n\n    renderCanvas();\n    const keys = {\n      a: {\n        pressed: false\n      },\n      d: {\n        pressed: false\n      },\n      w: {\n        pressed: false\n      },\n      lArrow: {\n        pressed: false\n      },\n      rArrow: {\n        pressed: false\n      },\n      uArrow: {\n        pressed: false\n      }\n    };\n\n    function animate() {\n      window.requestAnimationFrame(animate);\n      renderCanvas();\n      background.update();\n      player1.update();\n      player2.update(); //Stop player movement in X if they're grounded\n\n      if (player1.position.y + player1.height + player1.velocity.y >= 576) player1.velocity.x = 0;\n      if (player2.position.y + player2.height + player2.velocity.y >= 576) player2.velocity.x = 0; //P1 Movement\n\n      if (keys.a.pressed && player1.lastkey === \"a\") {\n        player1.velocity.x = -5;\n        player1.facing = \"left\";\n      } else if (keys.d.pressed && player1.lastkey === \"d\") {\n        player1.velocity.x = 5;\n        player1.facing = \"right\";\n      }\n\n      if (keys.w.pressed && player1.position.y + player1.height + player1.velocity.y >= 576) {\n        player1.velocity.y = -10;\n      } //P2 Movement\n\n\n      if (keys.lArrow.pressed) {\n        player2.velocity.x = -5;\n        player2.facing = \"left\";\n      } else if (keys.rArrow.pressed) {\n        player2.velocity.x = 5;\n        player2.facing = \"right\";\n      }\n\n      if (keys.uArrow.pressed && player2.position.y + player2.height + player2.velocity.y >= 576) {\n        player2.velocity.y = -10;\n      } //Detect Collisions\n      //P1 attacks\n\n\n      if (player1.attackBox.position.x + player1.attackBox.width >= player2.position.x && player1.attackBox.position.x + player1.attackBox.width <= player2.position.x + player2.width && player1.attackBox.position.y + player1.attackBox.height >= player2.position.y && player1.attackBox.position.y <= player2.position.y + player2.height && player1.isAttacking) {\n        player1.isAttacking = false;\n      }\n\n      if (player2.attackBox.position.x + player2.attackBox.width >= player1.position.x && player2.attackBox.position.x + player2.attackBox.width <= player1.position.x + player2.width && player2.attackBox.position.y + player2.attackBox.height >= player1.position.y && player2.attackBox.position.y <= player1.position.y + player1.height && player2.isAttacking) {\n        player2.isAttacking = false;\n      } //   console.log(player2.attackBox.offset);\n\n    }\n\n    animate();\n    window.addEventListener(\"keydown\", e => {\n      console.log(e);\n\n      switch (e.key) {\n        //player1\n        case \"d\":\n          keys.d.pressed = true;\n          player1.lastkey = \"d\";\n          break;\n\n        case \"a\":\n          keys.a.pressed = true;\n          player1.lastkey = \"a\";\n          break;\n\n        case \"w\":\n          keys.w.pressed = true;\n          break;\n\n        case \"q\":\n          player1.attack();\n          break;\n        //player2\n\n        case \"ArrowLeft\":\n          keys.lArrow.pressed = true;\n          player2.lastkey = \"lArrow\";\n          break;\n\n        case \"ArrowRight\":\n          keys.rArrow.pressed = true;\n          player2.lastkey = \"rArrow\";\n          break;\n\n        case \"ArrowUp\":\n          keys.uArrow.pressed = true;\n          break;\n\n        case \"/\":\n          player2.attack();\n          break;\n      }\n    });\n    window.addEventListener(\"keyup\", e => {\n      switch (e.key) {\n        case \"d\":\n          keys.d.pressed = false;\n          break;\n\n        case \"a\":\n          keys.a.pressed = false;\n          break;\n\n        case \"w\":\n          keys.w.pressed = false;\n          break;\n        //player2\n\n        case \"ArrowLeft\":\n          keys.lArrow.pressed = false;\n          break;\n\n        case \"ArrowRight\":\n          keys.rArrow.pressed = false;\n          break;\n\n        case \"ArrowUp\":\n          keys.uArrow.pressed = false;\n          break;\n      }\n    });\n  }, [canvas]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvasDiv\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvas,\n      width: 1024,\n      height: 576\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SmashBoys, \"Iosu+jEjScFAX5hfSp9z4J61DK4=\");\n\n_c = SmashBoys;\nexport default SmashBoys;\n\nvar _c;\n\n$RefreshReg$(_c, \"SmashBoys\");","map":{"version":3,"sources":["/home/james/projects/portfilio1/frontend/src/components/Smashboys/index.js"],"names":["React","useState","useEffect","useRef","useDispatch","useSelector","Navigate","BackgroundImage","SmashBoys","canvas","ctx","current","getContext","gravity","Sprite","constructor","position","velocity","color","facing","height","width","lastkey","isAttacking","attackBox","x","y","offset","draw","fillStyle","fillRect","update","attack","setTimeout","BGSprite","imageSrc","img","Image","src","hRatio","vRatio","ratio","Math","min","centerShift_x","centerShift_y","clearRect","drawImage","background","player1","player2","renderCanvas","keys","a","pressed","d","w","lArrow","rArrow","uArrow","animate","window","requestAnimationFrame","addEventListener","e","console","log","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\nimport \"./smashboys.css\";\nimport BackgroundImage from \"./Images/arena1.png\";\nfunction SmashBoys() {\n  const canvas = useRef(null);\n\n  useEffect(() => {\n    //Setup canvas background\n    const ctx = canvas.current.getContext(\"2d\");\n\n    const gravity = 0.2;\n\n    // Sprite constructor\n    class Sprite {\n      constructor({ position, velocity, color, facing }) {\n        this.position = position;\n        this.velocity = velocity;\n        this.height = 150;\n        this.width = 50;\n        this.lastkey = null;\n        this.color = color;\n        this.isAttacking = false;\n        this.facing = facing;\n        this.attackBox = {\n          position: {\n            x: this.position.x,\n            y: this.position.y,\n          },\n          offset: facing === \"right\" ? { x: 0, y: 0 } : { x: -50, y: 0 },\n\n          width: 100,\n          height: 50,\n        };\n      }\n      draw() {\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.position.x, this.position.y, this.width, this.height);\n\n        //AttackBox\n        if (this.isAttacking) {\n          ctx.fillStyle = \"yellow\";\n          ctx.fillRect(\n            this.attackBox.position.x,\n            this.attackBox.position.y,\n            this.attackBox.width,\n            this.attackBox.height\n          );\n        }\n      }\n\n      update() {\n        this.draw();\n        this.attackBox.position.x =\n          this.position.x + (this.facing === \"right\" ? 0 : -50);\n        this.attackBox.position.y = this.position.y;\n        this.position.x += this.velocity.x;\n        this.position.y += this.velocity.y;\n\n        if (this.position.y + this.height + this.velocity.y >= 576) {\n          this.velocity.y = 0;\n        } else this.velocity.y += gravity;\n\n        if (this.position.x + this.width + this.velocity.x <= 0) {\n          this.velocity.x = 0;\n        }\n      }\n      attack() {\n        this.isAttacking = true;\n        setTimeout(() => {\n          this.isAttacking = false;\n        }, 100);\n      }\n    }\n    //RENDER OTHER SPRITES\n    class BGSprite {\n      constructor({ position, imageSrc }) {\n        this.position = position;\n        this.height = 1040;\n        this.width = 576;\n        this.img = new Image();\n        this.img.src = imageSrc;\n      }\n\n      draw() {\n        // ctx.drawImage(this.image, this.position.x, this.position.y);\n         var canvas = ctx.canvas;\n         var hRatio = canvas.width / img.width;\n         var vRatio = canvas.height / img.height;\n         var ratio = Math.min(hRatio, vRatio);\n         var centerShift_x = (canvas.width - img.width * ratio) / 2;\n         var centerShift_y = (canvas.height - img.height * ratio) / 2;\n         ctx.clearRect(0, 0, canvas.width, canvas.height);\n         ctx.drawImage(\n           img,\n           0,\n           0,\n           img.width,\n           img.height,\n           centerShift_x,\n           centerShift_y,\n           img.width * ratio,\n           img.height * ratio\n         );\n      }\n      update() {\n        this.draw();\n      }\n    }\n    const background = new BGSprite({\n      position: { x: 0, y: 0 },\n      imageSrc: BackgroundImage,\n    });\n\n    ///REnder Players\n    const player1 = new Sprite({\n      position: {\n        x: 0,\n        y: 0,\n      },\n      velocity: { x: 0, y: 0 },\n      color: \"blue\",\n      //   offset: { x: 0, y: 0 },\n      facing: \"right\",\n    });\n\n    const player2 = new Sprite({\n      position: {\n        x: 400,\n        y: 100,\n      },\n      velocity: { x: 0, y: 0 },\n      color: \"red\",\n      //   offset: { x: -50, y: 0 },\n      facing: \"left\",\n    });\n\n    const renderCanvas = () => {\n      ctx.fillStyle = \"black\";\n      ctx.fillRect(0, 0, 1024, 576);\n    };\n\n    renderCanvas();\n\n    const keys = {\n      a: {\n        pressed: false,\n      },\n      d: {\n        pressed: false,\n      },\n      w: {\n        pressed: false,\n      },\n      lArrow: {\n        pressed: false,\n      },\n      rArrow: {\n        pressed: false,\n      },\n      uArrow: {\n        pressed: false,\n      },\n    };\n    function animate() {\n      window.requestAnimationFrame(animate);\n\n        renderCanvas();\n         background.update();\n      player1.update();\n      player2.update();\n\n      //Stop player movement in X if they're grounded\n      if (player1.position.y + player1.height + player1.velocity.y >= 576)\n        player1.velocity.x = 0;\n      if (player2.position.y + player2.height + player2.velocity.y >= 576)\n        player2.velocity.x = 0;\n\n      //P1 Movement\n      if (keys.a.pressed && player1.lastkey === \"a\") {\n        player1.velocity.x = -5;\n        player1.facing = \"left\";\n      } else if (keys.d.pressed && player1.lastkey === \"d\") {\n        player1.velocity.x = 5;\n        player1.facing = \"right\";\n      }\n      if (\n        keys.w.pressed &&\n        player1.position.y + player1.height + player1.velocity.y >= 576\n      ) {\n        player1.velocity.y = -10;\n      }\n      //P2 Movement\n\n      if (keys.lArrow.pressed) {\n        player2.velocity.x = -5;\n        player2.facing = \"left\";\n      } else if (keys.rArrow.pressed) {\n        player2.velocity.x = 5;\n        player2.facing = \"right\";\n      }\n      if (\n        keys.uArrow.pressed &&\n        player2.position.y + player2.height + player2.velocity.y >= 576\n      ) {\n        player2.velocity.y = -10;\n      }\n      //Detect Collisions\n      //P1 attacks\n      if (\n        player1.attackBox.position.x + player1.attackBox.width >=\n          player2.position.x &&\n        player1.attackBox.position.x + player1.attackBox.width <=\n          player2.position.x + player2.width &&\n        player1.attackBox.position.y + player1.attackBox.height >=\n          player2.position.y &&\n        player1.attackBox.position.y <= player2.position.y + player2.height &&\n        player1.isAttacking\n      ) {\n        player1.isAttacking = false;\n      }\n      if (\n        player2.attackBox.position.x + player2.attackBox.width >=\n          player1.position.x &&\n        player2.attackBox.position.x + player2.attackBox.width <=\n          player1.position.x + player2.width &&\n        player2.attackBox.position.y + player2.attackBox.height >=\n          player1.position.y &&\n        player2.attackBox.position.y <= player1.position.y + player1.height &&\n        player2.isAttacking\n      ) {\n        player2.isAttacking = false;\n      }\n      //   console.log(player2.attackBox.offset);\n    }\n\n    animate();\n\n    window.addEventListener(\"keydown\", (e) => {\n      console.log(e);\n      switch (e.key) {\n        //player1\n        case \"d\":\n          keys.d.pressed = true;\n          player1.lastkey = \"d\";\n\n          break;\n        case \"a\":\n          keys.a.pressed = true;\n          player1.lastkey = \"a\";\n          break;\n        case \"w\":\n          keys.w.pressed = true;\n          break;\n        case \"q\":\n          player1.attack();\n          break;\n\n        //player2\n        case \"ArrowLeft\":\n          keys.lArrow.pressed = true;\n          player2.lastkey = \"lArrow\";\n          break;\n        case \"ArrowRight\":\n          keys.rArrow.pressed = true;\n          player2.lastkey = \"rArrow\";\n          break;\n        case \"ArrowUp\":\n          keys.uArrow.pressed = true;\n          break;\n        case \"/\":\n          player2.attack();\n          break;\n      }\n    });\n    window.addEventListener(\"keyup\", (e) => {\n      switch (e.key) {\n        case \"d\":\n          keys.d.pressed = false;\n          break;\n        case \"a\":\n          keys.a.pressed = false;\n          break;\n        case \"w\":\n          keys.w.pressed = false;\n          break;\n\n        //player2\n        case \"ArrowLeft\":\n          keys.lArrow.pressed = false;\n\n          break;\n        case \"ArrowRight\":\n          keys.rArrow.pressed = false;\n\n          break;\n        case \"ArrowUp\":\n          keys.uArrow.pressed = false;\n          break;\n      }\n    });\n  }, [canvas]);\n\n  return (\n    <div className=\"canvasDiv\">\n      <canvas ref={canvas} width={1024} height={576} />\n    </div>\n  );\n}\nexport default SmashBoys;\n"]},"metadata":{},"sourceType":"module"}